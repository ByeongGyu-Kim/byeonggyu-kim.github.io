---
title: "Colors"
date: 2025-05-19 18:00:00 +0900
categories:
  - Imaging Photography
tags:
  - Vision
description: 
toc: true
comments: false
cdn: 
image:
math: true
pin: false
mermaid: false
---

> 계산사진학과 관련된 자료는 포항공과대학교 조성현 교수님의 계산사진학 강의를 기반으로 정리하였으며, 개인적으로 공부한 내용을 포함하고 있습니다.

하늘은 왜 파랗고, 바다는 왜 푸를까? 당연하게 받아들였던 색의 세계를 **수학과 공학**의 시각에서 바라보고자 한다. 우리가 느끼는 "색"이라는 단어는 지극히 인간적인 감각에 의존한다고 생각할 수 있는데, 카메라와 같은 디지털 세계에서는 **어떻게 정의하고, 처리하고, 응용할 수 있는지**를 다루어보고자 한다.

## 🎨 Color Basics
현대의 디지털 이미징과 컴퓨터 비전에서는 색, color를 어떻게 수학적으로 다루고 처리할지를 이해하는것이 필수적이다. 색을 기술하고 사용하는데 필요한 기본적인 개념인 color model과 color space를 우선 살펴보고자 한다.

### Color Model

색은 단순한 감정의 대상이 아니라, 수학적으로 정의된 좌표 공간 안에 위치한 하나의 점이다. 색상 모델은 이러한 색을 수치적으로 표현하기 위한 **추상적인 수학 모델**로, 일반적으로 하나의 좌표계와 그 안에서 실제 색들이 존재하는 하위 공간(subspace)으로 구성된다. 다시 말해, 색상 모델은 어떤 좌표계를 기준으로 색을 어떻게 수치화할지를 정의하고, 그 안에서 실제 색상이 표현될 수 있는 범위를 명시하는 구조를 말한다.

![Desktop View](/assets/img/imaging_photography/chap12_1.png)
_Figure 1: RGB Color Model_

어렵게 설명했지만 Figure 1에서 볼 수 있는 RGB Color Model은 우리에게 친숙한 단어이다. 이외에도 CMK, CMYK, HSV와 같은 다양한 종류의 Color Model이 존재하며 각각을 살펴보도록 하겠다.

#### 🔴 RGB (Red, Green, Blue)

RGB는 빛의 삼원색인 빨강(R), 초록(G), 파랑(B)을 조합하여 색을 표현하는 모델로, 디스플레이나 카메라 등 **빛을 사용하는 장치**에서 표준적으로 사용된다. 이 모델은 3차원 직교 좌표계로 구성되어 있으며, 각 축은 R, G, B 값을 0~1 또는 0~255 범위의 실수 혹은 정수로 표현한다. 모든 색은 이 세 색의 가중합으로 구성되며, 예를 들어 `(1, 0, 0)`은 순수한 빨강을, `(1, 1, 1)`은 흰색을 나타낸다.

RGB 모델의 강점은 **하드웨어 친화성**에 있다. 카메라 센서나 모니터는 실제로 RGB 채널로 빛을 감지하거나 방출하기 때문에, 데이터를 수집하고 출력하는 데 매우 효율적이다. 하지만 색상 성분 간의 **강한 상관성**과 **비직관성**은 단점으로 작용한다. 예를 들어 사람이 보기에 ‘보라색’이 어떤 RGB 값을 가져야 할지를 직관적으로 알기 어렵다. 이 때문에 색상 편집, 보정, 분석 등의 용도에는 부적합하다.

#### 🟠 CMY / CMYK (Cyan, Magenta, Yellow, Black)

![Desktop View](/assets/img/imaging_photography/chap12_3.png)
_Figure 2: CMY 혼합 다이어그램_

CMY 모델은 RGB와는 반대 개념인 **감산 혼합(Subtractive Mixing)**에 기반한 색상 모델이다. RGB는 빛을 더해 색을 만드는 방식인 반면, CMY는 **빛을 흡수하는 색소의 혼합**을 다룬다. 각 색상은 다음과 같이 RGB로부터 변환된다.

$$
\begin{bmatrix}
C \\
M \\
Y \\
\end{bmatrix}
=
\begin{bmatrix}
1 - R \\
1 - G \\
1 - B \\
\end{bmatrix}
$$

이 모델은 **잉크나 페인트와 같이 색소 기반의 출력 장치**에서 사용되며, 프린터는 일반적으로 CMY 정보를 입력받거나 내부적으로 RGB를 CMY로 변환해 사용한다. 이론적으로 동일한 양의 시안, 마젠타, 옐로우를 섞으면 검정이 나와야 하지만, 실제 색소는 불완전하므로 순수한 검정을 표현하기 어렵다. 이를 보완하기 위해 **검정(K, Key)** 채널을 추가하여 **CMYK 모델**이 널리 사용된다. CMYK 모델은 RGB에 비해 **인간 시각적 감성보다는 물리적 구현에 초점**이 맞추어져 있으며, 색 정확도보다 출력 비용과 효율성이 중요시되는 환경에 적합하다.

#### 🟢 HSI / HSV / HSL (Hue, Saturation, Intensity / Value / Lightness)

RGB나 CMY가 물리적인 장치 중심의 모델이라면, HSI 계열 모델은 **인간의 색 인지 과정**을 모사한 **지각 중심 모델**이다. 이 모델들은 색상을 다음 세 가지로 분리하여 표현한다.

- **Hue (색상):** 색의 종류를 나타내며, 일반적으로 원형 색상환 상의 각도로 표현된다.  
- **Saturation (채도):** 색의 순도를 의미하며, 얼마나 흰색이 섞였는지를 나타낸다.  
- **Intensity / Value / Lightness (명도):** 색의 밝기를 나타내는 요소로, 모델에 따라 수학적 정의가 다르다.

이러한 구조는 색조와 밝기를 분리해서 조작할 수 있게 해 주며, **히스토그램 평활화나 채도 조절 등 색상 편집** 작업에 특히 유리하다. HSV와 HSL은 HSI에서 파생된 모델로, 명도 성분(Value 또는 Lightness)을 정의하는 방식이 다르다. 이 모델들의 장점은 **색상 편집의 직관성과 유연성**에 있으며, 특히 포토샵이나 파이썬 이미지 프로세싱 라이브러리(OpenCV 등)에서 색상 분할, 필터링, 색 보정 작업에 자주 사용된다. 반면, 하드웨어 구현에는 적합하지 않기 때문에 최종 디스플레이 출력 단계에서는 다시 RGB로 변환하는 절차가 필요하다.

![Desktop View](/assets/img/imaging_photography/chap12_4.png) 
_Figure 4: HSI 색 공간 구조와 평면 시각화 예시_

위 그림은 HSI 색상 모델의 공간 구조를 시각화한 도식으로, 사람의 색 인지 방식에 따라 색상(Hue), 채도(Saturation), 명도(Intensity)가 어떻게 구성되는지를 보여준다. 우측의 다이어그램은 전체 HSI 색 공간의 기하학적 구조를 나타내며, 이중 원뿔(double cone) 형태를 따른다. 이 구조에서 세 성분은 다음과 같은 방식으로 해석된다.

- **Hue (H):** 원형 평면에서 색상의 각도로 표현된다. 예를 들어, 빨강은 0°, 초록은 120°, 파랑은 240°에 해당한다.
- **Saturation (S):** 중심축으로부터의 거리로 표현되며, 중심에 가까울수록 채도가 낮고, 외곽으로 갈수록 채도가 높아진다.
- **Intensity (I):** 수직 축의 높이로 정의되며, 아래는 검정(Black), 위는 흰색(White)에 해당한다.

좌측의 삼각형 이미지는 각각 특정 명도 \( I \) 값을 기준으로 H와 S 성분을 시각화한 단면이다.  
- 위쪽 평면은 \( I = 0.75 \)일 때의 색상 분포를 보여주며, 더 밝은 색들이 많이 포함되어 있다.  
- 아래쪽 평면은 \( I = 0.5 \)일 때의 분포로, 어두운 계열의 색이 중심에 더 가깝게 나타난다.  

이와 같이 HSI 공간에서는 밝기와 색조, 순도를 **완전히 분리**하여 다룰 수 있기 때문에, 명도만 조절하거나 색조만 선택적으로 변형하는 색상 처리에서 **압도적인 직관성과 제어력**을 제공한다. 더불어 Figure 4는 정사면체 두개를 붙여 놓은 형태로 나타내었는데, 원뿔을 붙여놓기도 다양한 방법으로 표현이 가능하고 단면의 모든 지점에서 I가 같다는 것이 중요하다. 아래와 같이 다양한 모양으로 표현이 가능하며 이 때 단면에서 계산가능한 S와 H는 그림과 같이 나타난다.

![Desktop View](/assets/img/imaging_photography/chap12_5.png)
_Figure 5: HSI 색 공간의 평면 구조 예시_

#### 🔁 RGB → HSI 변환 수식

지금부터는 우리가 가장 많이 활용하는 RGB 값을 어떻게 HSI로 변환가능한지 살펴보도록 하겠다. 

**1. Intensity (명도)**  
RGB의 평균값으로 정의되며, 전체적인 밝기를 나타낸다.

$$
I = \frac{R + G + B}{3}
$$

**2. Saturation (채도)**  
색의 순도이며, 흰색이 얼마나 섞였는지를 의미한다:

$$
S = 1 - \frac{3}{R + G + B} \cdot \min(R, G, B)
$$

**3. Hue (색상)**  
색의 종류를 각도로 표현하며, 다음과 같이 계산된다.

먼저 각도를 계산할 중간 단계 변수 $\theta$를 정의한다:

$$
\theta = \cos^{-1} \left( \frac{ \frac{1}{2}[(R - G) + (R - B)] }{ \sqrt{(R - G)^2 + (R - B)(G - B)} } \right)
$$

Hue는 다음과 같이 정의된다.

$$
H =
\begin{cases}
\theta, & \text{if } B \leq G \\
360^\circ - \theta, & \text{if } B > G
\end{cases}
$$

#### 🔁 HSI → RGB 변환 (요약)

반대로 HSI에서 RGB로 변환하려면 Hue 각도를 기준으로 다음 세 가지 영역으로 나누어 계산한다:

- **RG 영역**: \( 0^\circ \leq H < 120^\circ \)  
- **GB 영역**: \( 120^\circ \leq H < 240^\circ \)  
- **BR 영역**: \( 240^\circ \leq H < 360^\circ \)

각 영역마다 R, G, B의 계산 방식이 다르며, 이들은 수치적 근사 방식으로 구현되는 경우가 많다. 따라서 HSI에서 RGB로의 변환은 다소 복잡한 삼각함수 연산을 수반하게 된다.

---

#### 🔍 RGB vs. HSI: 시각적 구조 차이

RGB 모델은 정육면체 형태로 정의되며, 공간 내의 좌표값 조합으로 색을 표현한다. 반면 HSI는 **색상의 각도, 채도의 반지름, 밝기의 높이**를 기준으로 하는 원뿔형 또는 원통형의 공간 구조를 가진다.

📸 **이미지 추천 – Figure 3: HSI 원뿔 구조**  
- Hue: 원을 따라 시계방향으로 변화 (빨강 0°, 초록 120°, 파랑 240° 등)  
- Saturation: 중심에서 가장자리까지의 거리  
- Intensity: 수직 방향 축 (아래가 어둡고 위가 밝음)

이러한 구조 덕분에 색상 편집에서 특정 색조만을 선택하거나 밝기만을 조절하는 것이 훨씬 간단하고 직관적으로 가능하다.

---

#### ✅ 응용

- **히스토그램 평활화**: RGB 공간에서는 각 채널마다 독립적으로 조절해야 하지만, HSI에서는 명도 성분(Intensity)만을 조절하여 색상 자체는 유지하면서 이미지 전체의 대비를 향상시킬 수 있다.
- **채도 보정**: Saturation만 증폭하여 더 화사한 색감을 만들 수 있다.
- **색상 분할**: Hue 값을 기반으로 특정 색 영역(예: 노란색 계열, 초록 계열 등)만을 선택적으로 처리할 수 있다.

이처럼 HSI 모델은 RGB와는 전혀 다른 차원의 활용성을 제공하며, **색상 중심의 직관적인 영상 처리**를 가능하게 한다.





이처럼 각 색상 모델은 그 목적과 사용 환경에 따라 고유한 구조와 특성을 가지며, 색상 데이터를 다루는 목적에 따라 적절한 모델을 선택하는 것이 중요하다. 이러한 개념을 바탕으로, 다음에서는 색상 모델이 **물리적으로 어떤 색을 나타내는지**를 정의하는 **Color Space** 개념으로 이어진다.







### Color Space

이러한 색상 모델은 수학적으로 정의된 색의 구조이지만, 실제로 색을 어떻게 구현하느냐는 별개의 문제이다. RGB, CMY, HSI 등의 모델이 색을 좌표로 나타낸다면, **Color Space**는 그 좌표들이 실제로 어떤 색을 나타내는지를 결정짓는 **매핑 함수**까지 포함하는 개념이다. 즉, Color Space는 색상 모델의 수학적 구조에 **물리적 의미와 해석을 부여한 공간**이다.

쉽게 말해, RGB라는 좌표계 위에서 `(255, 0, 0)`이라는 수치는 단지 숫자일 뿐이다. 하지만 이것이 어떤 Color Space에서 정의되었는지에 따라 그 수치는 **서로 다른 빨강**으로 해석될 수 있다. 대표적인 예로 sRGB와 AdobeRGB가 있다. 두 Color Space 모두 RGB 모델을 기반으로 하지만, 각각의 R, G, B 값이 어떤 실제 색상의 파장을 나타내는지는 다르다. 이는 색 공간에 따라 **색의 범위(gamut)**가 달라진다는 것을 의미한다.

![Desktop View](/assets/img/imaging_photography/chap12_2.png)  
_Figure 2: RGB 기반 Color Space의 비교 – sRGB vs AdobeRGB_

이처럼 같은 색상 모델을 기반으로 하더라도, 어떤 매핑 방식을 사용하느냐에 따라 색의 표현은 달라진다. 따라서 색을 다루는 대부분의 시스템에서는 단순히 수치값만으로는 충분하지 않으며, 그 값이 **어느 색상 공간에 속하는지의 정보**가 함께 전달되어야 한다.

실제 이미지 처리에서는 Color Space를 엄밀히 구분하지 않고 색상 모델과 혼용해서 사용하는 경우도 많지만, 이 둘의 구분은 디지털 영상 기술의 정밀한 색상 처리를 위해 반드시 필요한 개념이다.

